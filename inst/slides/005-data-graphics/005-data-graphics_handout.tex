\documentclass[10pt,handout]{beamer}\usepackage[]{graphicx}\usepackage[]{color}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}


%\input{slides_header.tex}
\input{/home/sahir/git_repositories/EPIB607/slides/slides_header2.tex}
\graphicspath{{/home/sahir/git_repositories/epib607/inst/slides/figure/}}

%\let\oldShaded\Shaded
%\let\endoldShaded\endShaded
%\renewenvironment{Shaded}{\footnotesize\oldShaded}{\endoldShaded}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}
	
	
	
	%\title{Introduction to Regression Trees}
	%\author{Sahir Bhatnagar \inst{1}}
	%\author[shortname]{Sahir Rai Bhatnagar, PhD Candidate (Biostatistics) }
	%\institute[shortinst]{Department of Epidemiology, Biostatistics and Occupational Health}
	
	\title{005 - Data Graphics}
	\author{EPIB 607}
	\institute{
		Sahir Rai Bhatnagar\\
		Department of Epidemiology, Biostatistics, and Occupational Health\\
		McGill University\\
		
		\vspace{0.1 in}
		
		\texttt{sahir.bhatnagar@mcgill.ca}\\
		%\texttt{\url{https://sahirbhatnagar.com/EPIB607/}}
	}
	
	\date{slides compiled on \today}
	
	\maketitle
	
	\begin{frame}{Objective}
	\begin{itemize}
		\item Understand the building blocks of visualizing data
	\end{itemize}
	\end{frame}
	
	\section{Visualizing data: Mapping data onto aesthetics}
	
		\begin{frame}{What is Data Visualization?}
		\begin{itemize}
			\item In its most basic form, visualization is simply mapping data to geometry and color. 
			\item It works because your brain is wired to find patterns, and you can switch back and forth between the visual and the numbers it represents. 
			\item This is the important bit. You must make sure that the essence of the data isn't lost in that back and forth between visual and the value it represents because if you can't map back to the data, the visualization is just a bunch of shapes.
		\end{itemize}
	\end{frame}
	
	
	\begin{frame}{Aesthetics (aka Visual Cues)}
	\begin{itemize}
		\item All data visualizations map data values into quantifiable features of the resulting graphic. 
		\item We refer to these features as aesthetics, also known as Visual Cues.
	\end{itemize}
		\end{frame}
	
	%\begin{frame}[allowframebreaks]
	%\nocite{breiman1984classification}
	%	\nocite{friedman2001elements}
	%	\nocite{james2013introduction}
	%	\nocite{lopez2015arbres}
	%	\frametitle{References}
	%\printbibliography
	%\end{frame}
	
	\begin{frame}{Example: Scatterplot}
		\begin{itemize}
			\item When you use position as a visual cue, you compare values based on where others are placed in a given space or coordinate system
		\end{itemize}
		
\includegraphics[scale=0.5]{005-1.png}
	\end{frame}

\begin{frame}{Aesthetics (Visual Cues): The Building Blocks}
	\begin{enumerate}
		\item Position (numerical): where in relation to other things? 
		\item Length (numerical): how big (in one dimension)? 
		\item  Angle (numerical): how wide? parallel to something else? 
		\item  Direction (numerical) at what slope? In a time series, going up or down? 
		\item  Shape (categorical) belonging to which group? 
		\item  Area (numerical) how big (in two dimensions)? 
		\item  Volume (numerical) how big (in three dimensions)? 
		\item  Shade (either) to what extent? how severely? 
		\item  Color (either) to what extent? how severely? Beware of red/green color blindness
		
		
	\end{enumerate}
\end{frame}


	\begin{frame}{Visual Cues: When you visualize data, you encode values to shapes, sizes, and colors}
		\centering
	\includegraphics[scale=0.4]{005-2.png}
\end{frame}

	\begin{frame}{Commonly Used Visual Cues}
	\centering
	\includegraphics[scale=0.4]{005-3.png}
\end{frame}

	\begin{frame}{All visual cues fall into one of two groups}
\begin{itemize}
	\item Those that can represent continuous data and those that can not
\end{itemize}
\end{frame}


	\begin{frame}{Which of the following can represent continuous data? Discrete data?}
	\centering
	\includegraphics[scale=0.4]{005-3.png}
\end{frame}


\section{Scales}

\begin{frame}{Scales}
	\begin{itemize}
		\item To \textbf{map} data values onto \textbf{aesthetics}, we need to specify which data values correspond to which specific aesthetics values. \pause 
		\item For example, if our graphic has an x axis, then we need to specify which data values fall onto particular positions along this axis. \pause 
		\item Similarly, we may need to specify which data values are represented by particular shapes or colors. 
		
	\end{itemize}
\end{frame}


	\begin{frame}{Scales}
	\begin{itemize}
		\item This mapping between data values and aesthetics values is created via scales. 
		\item A scale defines a unique mapping between data and aesthetics.
		\item Importantly, \textbf{a scale must be one-to-one}, such that for each specific data value there is exactly one aesthetics value and vice versa. 
		\item If a scale isn't one-to-one, then the data visualization becomes ambiguous.		
	\end{itemize}
\end{frame}




	\begin{frame}{Scales}
		\begin{itemize}
			\item Scales link data values to aesthetics. 
			\item Here, the numbers 1 through 4 have been mapped onto a position scale, a shape scale, and a color scale. 
			\item For each scale, each number corresponds to a unique position, shape, or color and vice versa
		\end{itemize}
	\centering
	\includegraphics[scale=0.3]{005-5.png}
\end{frame}


	\begin{frame}{How many scales are being used?}
	\centering
	\includegraphics[scale=0.4]{005-6.png}
\end{frame}

	\begin{frame}{How many scales are being used?}
	\centering
	\includegraphics[scale=0.4]{005-7.png}
\end{frame}

	\begin{frame}{How many scales are being used?}
	\centering
	\includegraphics[scale=0.4]{005-8.png}
\end{frame}


\begin{frame}{Difference between Aesthetics (Visual Cues) and Scales ?}
\begin{itemize}
	\item \textbf{Aesthetics:} describe every aspect of a given graphical element.
	\item \textbf{Scale:} defines a unique mapping between data and aesthetics.
	\item A scale is a visual cue with data attached to it
	
\end{itemize}
\end{frame}


\section{Color scales}

\begin{frame}{Color scales: 3 use cases}
	\begin{enumerate}
		\item To distinguish groups of data from each other
		\item Represent data values
		\item To highlight
	\end{enumerate}

\vspace{0.2in}
		The types of colors we use and the way in which we use them are quite different for these three cases.
\end{frame}


	\begin{frame}{Color as a tool to distinguish}
	\centering
	\includegraphics[scale=0.4]{005-9.png}
\end{frame}


	\begin{frame}{Color to represent values}
	\centering
	\includegraphics[scale=0.4]{005-10.png}
\end{frame}


	\begin{frame}{Color as a tool to highlight}
	\centering
	\includegraphics[scale=0.4]{005-11.png}
\end{frame}



	\begin{frame}{Cynthia Brewer Palette}
	\centering
	\includegraphics[scale=0.4]{005-12.png}
\end{frame}


	\begin{frame}{Good choice of colors?}
	\centering
	\includegraphics[scale=0.4]{005-13.png}
\end{frame}




	\begin{frame}{Perceptually Uniform Palettes}
	\centering
	\includegraphics[scale=0.4]{005-14.png}
	
	\begin{itemize}
		\item \url{https://cran.r-project.org/web/packages/colorspace/vignettes/colorspace.html}
		\item \url{https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html}
	\end{itemize}
\end{frame}



\begin{frame}[fragile]{Qualitative palette}
\begin{knitrout}\tiny
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{library}\hlstd{(oibiostat);} \hlkwd{data}\hlstd{(}\hlstr{"famuss"}\hlstd{)}
\hlkwd{library}\hlstd{(ggplot2)}
\hlkwd{library}\hlstd{(colorspace)}

\hlkwd{ggplot}\hlstd{(famuss,} \hlkwd{aes}\hlstd{(}\hlkwc{x} \hlstd{= actn3.r577x,} \hlkwc{y} \hlstd{= bmi,} \hlkwc{fill} \hlstd{= actn3.r577x))} \hlopt{+}
  \hlkwd{geom_boxplot}\hlstd{()} \hlopt{+}
  \hlstd{colorspace}\hlopt{::}\hlkwd{scale_fill_discrete_qualitative}\hlstd{()}
\end{alltt}
\end{kframe}

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-1-1} 

}


\begin{kframe}\begin{alltt}
\hlkwd{ggplot}\hlstd{(famuss,} \hlkwd{aes}\hlstd{(}\hlkwc{x} \hlstd{= height,} \hlkwc{y} \hlstd{= weight,} \hlkwc{color} \hlstd{= bmi))} \hlopt{+}
  \hlkwd{geom_point}\hlstd{()} \hlopt{+}
  \hlstd{colorspace}\hlopt{::}\hlkwd{scale_color_continuous_sequential}\hlstd{(}\hlkwc{palette} \hlstd{=} \hlstr{"Viridis"}\hlstd{)}
\end{alltt}
\end{kframe}

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-1-2} 

}


\end{knitrout}
\end{frame}

	
	
	\begin{frame}[fragile]{Sequential palette}
\begin{knitrout}\tiny
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{ggplot}\hlstd{(famuss,} \hlkwd{aes}\hlstd{(}\hlkwc{x} \hlstd{= height,} \hlkwc{y} \hlstd{= weight,} \hlkwc{color} \hlstd{= bmi))} \hlopt{+}
  \hlkwd{geom_point}\hlstd{()} \hlopt{+}
  \hlstd{colorspace}\hlopt{::}\hlkwd{scale_color_continuous_sequential}\hlstd{(}\hlkwc{palette} \hlstd{=} \hlstr{"Viridis"}\hlstd{)}
\end{alltt}
\end{kframe}

{\centering \includegraphics[width=\maxwidth]{figure/unnamed-chunk-2-1} 

}


\end{knitrout}
	\end{frame}
	
	
	\begin{frame}[fragile]{Session Info}
		\tiny
		
\begin{knitrout}\tiny
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{verbatim}
R version 4.0.2 (2020-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Pop!_OS 20.10

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.10.so

attached base packages:
[1] tools     stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
 [1] colorspace_2.0-2 oibiostat_0.2.0  here_0.1         NCStats_0.4.7   
 [5] FSA_0.8.30       forcats_0.5.1    stringr_1.4.0    dplyr_1.0.7     
 [9] purrr_0.3.4      readr_1.4.0      tidyr_1.1.3      tibble_3.1.3    
[13] ggplot2_3.3.5    tidyverse_1.3.0  knitr_1.33      

loaded via a namespace (and not attached):
 [1] fs_1.5.0           lubridate_1.7.9    httr_1.4.2         rprojroot_2.0.2   
 [5] backports_1.2.1    utf8_1.2.2         R6_2.5.1           DBI_1.1.1         
 [9] withr_2.4.2        tidyselect_1.1.1   gridExtra_2.3      leaflet_2.0.3     
[13] curl_4.3.2         compiler_4.0.2     cli_3.0.1          rvest_1.0.0       
[17] pacman_0.5.1       xml2_1.3.2         ggdendro_0.1.22    labeling_0.4.2    
[21] mosaicCore_0.8.0   scales_1.1.1       digest_0.6.27      ggformula_0.9.4   
[25] foreign_0.8-80     rio_0.5.16         pkgconfig_2.0.3    htmltools_0.5.1.1 
[29] highr_0.9          dbplyr_1.4.4       htmlwidgets_1.5.3  rlang_0.4.11      
[33] readxl_1.3.1       rstudioapi_0.13    farver_2.1.0       generics_0.1.0    
[37] jsonlite_1.7.2     crosstalk_1.1.1    zip_2.2.0          car_3.0-9         
[41] magrittr_2.0.1     mosaicData_0.20.1  Matrix_1.2-18      Rcpp_1.0.7        
[45] munsell_0.5.0      fansi_0.5.0        abind_1.4-5        lifecycle_1.0.0   
[49] stringi_1.7.3      carData_3.0-4      MASS_7.3-53        plyr_1.8.6        
[53] ggstance_0.3.4     grid_4.0.2         blob_1.2.1         ggrepel_0.8.2     
[57] crayon_1.4.1       lattice_0.20-41    haven_2.3.1        splines_4.0.2     
[61] hms_1.0.0          pillar_1.6.2       reprex_0.3.0       glue_1.4.2        
[65] evaluate_0.14      data.table_1.14.0  modelr_0.1.8       vctrs_0.3.8       
[69] tweenr_1.0.1       cellranger_1.1.0   gtable_0.3.0       polyclip_1.10-0   
[73] assertthat_0.2.1   TeachingDemos_2.12 xfun_0.25          ggforce_0.3.2     
[77] openxlsx_4.1.5     broom_0.7.2        mosaic_1.7.0       ellipsis_0.3.2    
\end{verbatim}
\end{kframe}
\end{knitrout}
		
	\end{frame}
	
\end{document}
